<admin-navbar></admin-navbar>
<div class="container-fluid" [ngStyle]="adminS.dashboard_container_style">
     <div class="row">
          <div class="d-none d-lg-block col-lg-2">
               <admin-lg-menu [active_tab]="'projects'"></admin-lg-menu>
          </div>
          <div class="col-12 col-lg-10">
               <div class="row mt-3">
                    <div class="col-12">
                         <button class="btn btn-sm btn-outline-info float-right" (click)="new_project_dialog_open()">
                              <i class="fa fa-plus mr-1"></i>
                              New Project
                         </button>
                         <h4 class="text-light">
                              <i class="fa fa-cogs mr-2"></i>
                              Manage Projects
                         </h4>
                    </div>
               </div>
               <div class="row mt-4">
                    <div class="col-12 col-md-6 col-lg-4 pb-2" *ngFor="let project of appState.state.projects">
                         <div class="card card-body mb-3 p-3">
                              <div class="row">
                                   <div class="col">
                                        <button class="btn btn-sm btn-outline-danger float-right ml-2"
                                             (click)="delete_project_dialog_open(project)">
                                             <i class="fa fa-trash"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary float-right"
                                             routerLink="/admin/project/{{project.id}}">
                                             <i class="fa fa-edit"></i>
                                        </button>
                                        <h5>
                                             {{project.title}}
                                        </h5>
                                        <small class="text-muted">
                                             <i class="fa fa-clock-o mr-1"></i>
                                             {{project.completion_time | date:'MMMM, y'}}
                                             <br class="d-lg-none" />
                                             <ng-container *ngFor="let category of project.project_categories">
                                                  <i class="fa fa-asterisk ml-lg-2"></i>&nbsp;{{category.name}}
                                             </ng-container>
                                        </small>
                                   </div>
                              </div>
                              <hr class="mt-3 mb-2" />
                              <div>{{project.short_description}}</div>
                         </div>
                    </div>
               </div>
          </div>
     </div>
</div>

<p-dialog [(visible)]="new_project_dialog_visible" [modal]="true" [blockScroll]="true" [dismissableMask]="true"
     [showHeader]="true" [positionTop]="70" [width]="600" *ngIf="new_project">
     <p-header>
          New Project
     </p-header>
     <input class="form-control" type="text" [(ngModel)]="new_project.title" placeholder="Project Title" />
     <button class="btn btn-sm btn-info mt-3" (click)="new_project_dialog_confirm()">Create Project</button>
</p-dialog>


<p-dialog [(visible)]="delete_project_dialog_visible" [modal]="true" [blockScroll]="true" [dismissableMask]="true"
     [showHeader]="true" [positionTop]="150" [width]="600" *ngIf="delete_project">

     <p-header>
          Delete Project
     </p-header>

     <div class="row no-gutters py-3">
          <div class="col-12">
               {{delete_project.title}}
          </div>
     </div>

     <button class="btn btn-danger btn-sm" (click)="delete_project_dialog_submit()">Delete</button>

</p-dialog>